{% extends "transport/index.html" %}

{% block dategroup %}
<div class="input-group-addon"><span class="glyphicon glyphicon-calendar"/></div>
<input type="date" class="form-control" id="inputDateFrom" name="date_from" value={{request.GET.date_from}}>
<div class="input-group-addon"><span class="glyphicon">-</span></div>
<input type="date" class="form-control" id="inputDateTo" name="date_to" value={{request.GET.date_to}}>

{% endblock %}

{%block search_nav_extra%}
<div class="row" style="margin-bottom:10px">
	<div class="col-md-12 text-right">
		<a href="{% url 'transport:index' %}" class="btn btn-danger" role="button">
			Anular Filtro
		</a>
	</div>
</div>
{% endblock %}

{%block nav_extra%}
{% if request.GET.group|add:0 > 0 %}
<nav class="navbar navbar-default">
	<div class="container">
		<div class="navbar-header">
			<span class="navbar-brand">Grupo {{current_group}}</span>
		</div>
		<ul class="nav navbar-nav navbar-right">
			<li><a href="#" type="button" data-toggle="modal" data-target="#groupModal" role="button"><span class="glyphicon glyphicon-info-sign"></span> <strong>Detalles</strong></a></li>
		</ul>
	</div>
	{% include "transport/group_modal.html" %}
</nav>
{% endif %}
{% endblock %}

{% block btn_print %}
<a target="_blank" href="{% url 'transport:travel_pdf' %}?{{request.GET.urlencode}}">
	<button class="btn btn-default"><span class="glyphicon glyphicon-print"/> Imprimir</button>
</a>
{% endblock %}

{% block aditional_scripts %}
{% if request.GET.group|add:0 > 0 %}
<script>
	$(function(){
			$('#groupFormSubmit').click(function(event){
			  event.preventDefault();
				$.ajax({
					url: "{% url 'transport:group_save' current_group.id %}",
					type: "POST",
					data: $('#groupForm').serialize(),
					success: function(data){
						location.reload();
					}
				});
				$('#groupModal').modal('hide');
			});
		});
</script>
{% endif %}
{% endblock %}